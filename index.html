<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return from Wonderland　ヒント</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Return from Wonderland ヒント">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
      .reload-container { position: absolute; top: 15px; right: 15px; z-index: 100; }
      .reload-button { background: #fff; border: 1px solid #ccc; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; color: #666; padding: 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      .reload-button:active { background-color: #eee; transform: rotate(90deg); transition: 0.2s; }
      .accordion.is-locked { display: none !important; }
    </style>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function() { navigator.serviceWorker.register("./sw.js"); });
      }
      function reloadPage() { location.reload(true); }

      async function checkAutoUnlock() {
        try {
          const response = await fetch("./status.json?t=" + Date.now() + "&nc=" + Math.random());
          if (!response.ok) return;
          const statusMap = await response.json();
          document.querySelectorAll(".accordion.is-locked").forEach(acc => {
            const nameSpan = acc.querySelector(".hint-name");
            if (!nameSpan) return;
            const cleanName = nameSpan.innerText.trim();
            if (statusMap[cleanName] === true) {
              acc.classList.remove("is-locked");
            }
          });
        } catch (e) { console.error("Update check failed", e); }
      }
      setInterval(checkAutoUnlock, 5000);
    </script>
</head>
<body>
    <div class="container" style="position: relative;">
        <div id="start-screen">
            <h1>Return from Wonderland</h1>
            <p>チームメンバー全員の合意を得てから読み進めましょう。</p>
            <button id="show-hint-button">ヒントを見る</button>
        </div>
        <div id="hint-content" style="display: none;">
            <div class="reload-container">
              <button class="reload-button" onclick="reloadPage()" title="再読み込み">↻</button>
            </div>
            <h1>Return from Wonderland　ヒント</h1>
            <div class="hint-time-guidelines">
                <p class="guideline-heading">ヒントが表示されない場合は右上リロードボタンを押してください</p>
            </div>
            <div class="accordion level-1"><div class="accordion-header"><span class="hint-name">STEP1</span></div><div class="accordion-content"><div class="hint-body"><p>部屋のオブジェと謎が１個ずつ対応しています。<br>謎の特徴から当てはまるオブジェを考えてみましょう。</p></div><div class="accordion inner-accordion level-2"><div class="accordion-header"><span class="hint-name">謎1</span></div><div class="accordion-content"><div class="hint-body"><p>オブジェ『希望』に対応しています。<br>オブジェは方位磁石をモチーフにしたものであり、赤い針は北を表します。<br>北を下に向けたとき、謎の用紙に対して左側は東、上側は南、右側は西を表します。<br><br>アタマやシッポは日本語で、ヘッドやテールはカタカナ英語であることに気をつけてそれぞれの方角の名前の先頭の文字と末尾の文字を読みましょう。<br><br>例えば、謎の用紙の上側（土にいる生き物）は、<br>「みなみ」のアタマ→み<br>「みなみ」のシッポ→み<br>「サウス」のテール＋濁点→ず<br>よって「土にいる生き物」＝「みみず」となります。</p></div><div class="accordion inner-accordion level-3"><div class="accordion-header"><span class="hint-name">さらにヒント</span></div><div class="accordion-content"><div class="hint-body"><p>謎の用紙の左側（東側）の「台所にある道具」は、<br>「イースト」のテール（最後の文字）→と<br>「イースト」のヘッド（最初の文字）→い<br>「ひがし」のシッポ（最後の文字）→し<br>よって「台所にある道具」＝「といし」となります。<br><br>これを答えるべき右側に適用すると、<br>謎の用紙の右側（西側）は、<br>「ウエスト」のテール（最後の文字）の濁点付き→？<br>「ウエスト」のヘッド（最初の文字）→？<br>「にし」のシッポ（最後の文字）→？<br>を繋げたものを考えましょう。</p></div><div class="accordion inner-accordion level-4"><div class="accordion-header"><span class="hint-name">答え</span></div><div class="accordion-content"><div class="hint-body"><p>答えは<span class="red-text"><strong>ドウシ</strong></span>です。</p></div></div></div>
</div></div>
</div></div>
<div class="accordion inner-accordion level-2"><div class="accordion-header"><span class="hint-name">謎2</span></div><div class="accordion-content"><div class="hint-body"><p>オブジェ『深層』に対応しています。<br>オブジェの1番上にあるものは「太陽」です。<br>真ん中にあるものは「雲」です。<br>1番下にあるものは「土」です。<br><br>「真ん中に複数あるもの」は逆さに書かれているので逆さから読み、「もく」を表します。<br>これらを表し、7つの繰り返すものを考えてみましょう。</p></div><div class="accordion inner-accordion level-3"><div class="accordion-header"><span class="hint-name">さらにヒント</span></div><div class="accordion-content"><div class="hint-body"><p>日→・・・→もく→・・・→土となっていることから、7つの繰り返すものは曜日です。<br>左からひらがなで日月火水木金土を埋め、文字を拾いましょう</p></div><div class="accordion inner-accordion level-4"><div class="accordion-header"><span class="hint-name">答え</span></div><div class="accordion-content"><div class="hint-body"><p>答えは<span class="red-text"><strong>カキン</strong></span>です。</p></div></div></div>
</div></div>
</div></div>
<div class="accordion inner-accordion level-2"><div class="accordion-header"><span class="hint-name">謎3</span></div><div class="accordion-content"><div class="hint-body"><p>オブジェ『青空』に対応しています。<br>四角の空欄の中には素材名が入ります。<br><br>3つの青三角の付いている3つの四角に入る文字がどういう法則であれば「マクロ」になるのか考えましょう。<br>特に三角の示す方向に着目しましょう。<br>法則がわかったら、同様の法則を赤三角にも当てはめましょう。</p></div><div class="accordion inner-accordion level-3"><div class="accordion-header"><span class="hint-name">さらにヒント</span></div><div class="accordion-content"><div class="hint-body"><p>3つの青三角では、ハ→マ、エ→ク、レ→ロになっています。<br>これは五十音表で矢印の方向に動かすことで成り立っています。<br>赤三角も同様に、「ネ」「チ」「リ」を五十音表の矢印の方向に変換しましょう</p></div><div class="accordion inner-accordion level-4"><div class="accordion-header"><span class="hint-name">答え</span></div><div class="accordion-content"><div class="hint-body"><p>答えは<span class="red-text"><strong>テツヤ</strong></span>です。</p></div></div></div>
</div></div>
</div></div>
<div class="accordion inner-accordion level-2"><div class="accordion-header"><span class="hint-name">謎4</span></div><div class="accordion-content"><div class="hint-body"><p>オブジェ『沈黙』に対応しています。<br>オブジェはひらがなの「へ」をモチーフにしています。<br>これを丸に入れたとき、配置から連想されるものを考えましょう。<br>⚫️は「も」が入り、三角には「の」が入ります。<br>黒四角にはそれぞれアルファベット小文字が入ります。</p></div><div class="accordion inner-accordion level-3"><div class="accordion-header"><span class="hint-name">さらにヒント</span></div><div class="accordion-content"><div class="hint-body"><p>図形は「へのへのもへじ」を表しています。<br>上の「へ」は眉毛、下の「へ」は口が対応しています。<br>マスに当てはまるようにアルファベットに変換しましょう。</p></div><div class="accordion inner-accordion level-4"><div class="accordion-header"><span class="hint-name">答え</span></div><div class="accordion-content"><div class="hint-body"><p>答えは<span class="red-text"><strong>ギンミ</strong></span>です。</p></div></div></div>
</div></div>
</div></div>
<div class="accordion inner-accordion level-2"><div class="accordion-header"><span class="hint-name">まとめ謎のヒント</span></div><div class="accordion-content"><div class="hint-body"><p>1問目で使ったオブジェのタイトルの1文字目、2問目で使ったオブジェの2文字目というように文字を拾うと「キンゾク」となります。<br>よって謎1〜4の答えから「金属」を消して残った文字を並び替えましょう。<br>答えは「か」から始まるものになります。</p></div><div class="accordion inner-accordion level-3"><div class="accordion-header"><span class="hint-name">まとめ謎の答え</span></div><div class="accordion-content"><div class="hint-body"><p>小謎1~4の答えから金属となる金（キン）、銀（ギン）、銅（ドウ）、鉄（テツ）を消した上で、残った文字「シ」「カ」「ヤ」「ミ」を並び替えましょう。<br>答えは「カシミヤ」となります。</p></div></div></div>
</div></div>
</div></div>
<div class="accordion is-locked level-1"><div class="accordion-header"><span class="hint-name">STEP2</span></div><div class="accordion-content"><div class="hint-body"><p>部屋の絵画と小謎が１個ずつ対応しています。<br>小謎の特徴から当てはまる絵画を考えてみましょう。</p></div></div></div>
<div class="accordion is-locked level-1"><div class="accordion-header"><span class="hint-name">STEP3</span></div><div class="accordion-content"><div class="hint-body"><p></p></div></div></div>
<div class="accordion is-locked level-1"><div class="accordion-header"><span class="hint-name">STEP4</span></div><div class="accordion-content"><div class="hint-body"><p></p></div></div></div>
<div class="accordion is-locked level-1"><div class="accordion-header"><span class="hint-name">STEP5</span></div><div class="accordion-content"><div class="hint-body"><p></p></div></div></div>
<div class="accordion is-locked level-1"><div class="accordion-header"><span class="hint-name">STEP6</span></div><div class="accordion-content"><div class="hint-body"><p></p></div></div></div>

        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>